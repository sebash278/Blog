<%- include("partials/header.ejs") %>

<div class="container">
  <div class="register-container">
    <div class="register-header">
      <h1>Crea tu Cuenta</h1>
    </div>

    <% if (typeof error !== "undefined") { %>
      <div class="alert alert-error">
        <%= error %>
      </div>
    <% } %>
    <form action="/register" method="POST" class="register-form">
      <div class="form-group__register">
        <label for="name"> Nombre Completo </label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="Adam Walker"
          required
        />
      </div>

      <div class="form-group__register">
        <label for="username"> Nombre de Usuario </label>
        <input
          type="text"
          id="username"
          name="username"
          placeholder="Nombre de usuario"
          required
        >
      </div>

    <div class="form-group__register">
        <label for="email"> Correo Electrónico </label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="example@email.com"
          required
        >
    </div>

    <div class="form-group__register">
        <label for="password"> Contraseña </label>
        <input
          type="password"
          id="password"
          name="password"
          required
          oninput="validatePassword()"
        >
        <small id="password-warning" style="color: #ef4444; font-size: 0.8rem; display: none;"></small>
    </div>

      <div class="form-actions">
        <p>¿Ya tienes una cuenta?<a href="/login" class="btn btn-secondary"> Inicia Sesión </a></p>
        <button type="submit" class="btn btn-primary">Crear Cuenta</button>
      </div>
    </form>
  </div>
</div>

<script>
  function validatePassword() {
    const pass = document.getElementById("password").value;
    const warning = document.getElementById("password-warning");
    const strong = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/;

    if (!strong.test(pass)) {
      warning.style.display = "block";
      warning.textContent =
        "Contraseña insegura: mínimo 8 caracteres, con mayúscula, minúscula, número y símbolo.";
    } else {
      warning.style.display = "none";
    }
  }
</script>

<%- include("partials/footer.ejs") %>